// DOHSaving V2 ‚Äî Prisma Schema
// Redesigned from db_webdohcoop (21 tables ‚Üí 26 tables)
// Changes: removed longblob, normalized naming, added relationships

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
}

// ============================================================
// üîê Authentication & Users
// ============================================================

model User {
  id                  Int       @id @default(autoincrement())
  fullName            String?   @db.VarChar(255)
  userName            String    @unique @db.VarChar(255)
  password            String    @db.VarChar(255)
  userRole            String?   @db.VarChar(50) // admin, editor, viewer
  isActive            Boolean   @default(true)
  phone               String?   @db.VarChar(20)
  department          String?   @db.VarChar(100)
  avatarPath          String?   @db.VarChar(500)
  menuPermissions     Json?     // JSON for menu access permissions

  // Security
  failedLoginAttempts Int       @default(0)
  lockedUntil         DateTime?
  twoFactorEnabled    Boolean   @default(false)
  twoFactorSecret     String?   @db.VarChar(255)

  // Password management
  lastPasswordChange  DateTime  @default(now())
  mustChangePassword  Boolean   @default(false)
  tempPassword        String?   @db.VarChar(255)

  // Session tracking
  lastLoginAt         DateTime?
  loginCount          Int       @default(0)
  ipAddress           String?   @db.VarChar(45)
  sessionToken        String?   @db.VarChar(500)

  // Timestamps
  createdAt           DateTime  @default(now())
  updatedAt           DateTime  @updatedAt

  // Relations
  auditLogs           AuditLog[]

  @@index([userName])
  @@index([isActive])
  @@index([department])
  @@map("users")
}

// ============================================================
// üì∞ Content Management ‚Äî News, Slides, Videos, Photos
// ============================================================

model News {
  id          Int       @id @default(autoincrement())
  title       String?   @db.VarChar(255)
  details     String?   @db.Text
  imagePath   String?   @db.VarChar(500)
  pdfPath     String?   @db.VarChar(500)
  legacyPath  String?   @db.VarChar(500)  // ‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏Å‡πà‡∏≤ ‡πÄ‡∏ä‡πà‡∏ô 34005357-f6e8-4f9a-a7ff-f05eca0fff40.pdf
  category    String    @default("general") @db.VarChar(50)
  viewCount   Int       @default(0)
  isPinned    Boolean   @default(false)
  isActive    Boolean   @default(true)
  createdBy   String?   @db.VarChar(255)
  updatedBy   String?   @db.VarChar(255)
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  @@index([title])
  @@index([createdAt])
  @@index([category])
  @@index([legacyPath])
  @@map("news")
}

model Slide {
  id          Int       @id @default(autoincrement())
  sortOrder   Int       @default(0)
  imagePath   String?   @db.VarChar(500)
  urlLink     String?   @db.VarChar(500)
  title       String?   @db.VarChar(255)
  subtitle    String?   @db.VarChar(255)
  description String?   @db.Text
  bgGradient  String?   @db.VarChar(500)
  ctaText     String?   @db.VarChar(100)
  isActive    Boolean   @default(true)
  createdBy   String?   @db.VarChar(255)
  updatedBy   String?   @db.VarChar(255)
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  @@index([sortOrder])
  @@map("slides")
}

model Video {
  id          Int       @id @default(autoincrement())
  title       String?   @db.VarChar(255)
  youtubeUrl  String?   @db.VarChar(500)
  details     String?   @db.VarChar(500)
  category    String    @default("general") @db.VarChar(50) // general, election
  isActive    Boolean   @default(true)
  createdBy   String?   @db.VarChar(255)
  updatedBy   String?   @db.VarChar(255)
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  @@index([category])
  @@map("videos")
}

model PhotoAlbum {
  id             Int       @id @default(autoincrement())
  title          String?   @db.VarChar(255)
  coverPath      String?   @db.VarChar(500)
  imagePaths     Json?     // JSON array of image paths
  category       String?   @db.VarChar(255)
  isActive       Boolean   @default(true)
  createdBy      String?   @db.VarChar(255)
  updatedBy      String?   @db.VarChar(255)
  createdAt      DateTime  @default(now())
  updatedAt      DateTime  @updatedAt

  @@map("photo_albums")
}

model Notification {
  id          Int       @id @default(autoincrement())
  title       String?   @db.VarChar(255)
  imagePath   String?   @db.VarChar(500)
  urlLink     String?   @db.VarChar(500)
  sortOrder   Int       @default(0)
  startDate   DateTime? @db.Date
  endDate     DateTime? @db.Date
  clickCount  Int       @default(0)
  isActive    Boolean   @default(false)
  createdBy   String?   @db.VarChar(255)
  updatedBy   String?   @db.VarChar(255)
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  @@index([sortOrder])
  @@map("notifications")
}

// ============================================================
// üè¢ Organization
// ============================================================

model OrganizationalTree {
  id          Int       @id @default(autoincrement())
  name        String?   @db.VarChar(255)
  position    String?   @db.VarChar(255)
  priority    Int       @default(0)
  type        String?   @db.VarChar(100) // board, staff, committee
  imagePath   String?   @db.VarChar(500)
  isActive    Boolean   @default(true)
  createdBy   String?   @db.VarChar(255)
  updatedBy   String?   @db.VarChar(255)
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  @@index([type])
  @@index([priority])
  @@map("organizational_tree")
}

model CooperativeSociety {
  id           Int       @id @default(autoincrement())
  imagePath    String?   @db.VarChar(500)
  societyType  String?   @db.VarChar(255)
  isActive     Boolean   @default(true)
  createdBy    String?   @db.VarChar(255)
  updatedBy    String?   @db.VarChar(255)
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt

  @@map("cooperative_society")
}

model Contact {
  id          Int       @id @default(autoincrement())
  name        String?   @db.VarChar(255)
  doh         String?   @db.VarChar(255)
  coop        String?   @db.VarChar(255)
  mobile      String?   @db.VarChar(255)
  createdBy   String?   @db.VarChar(255)
  updatedBy   String?   @db.VarChar(255)
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  @@map("contacts")
}

// ============================================================
// üìã Services & Downloads
// ============================================================

model Service {
  id            Int       @id @default(autoincrement())
  title         String?   @db.VarChar(255)
  mainType      String?   @db.VarChar(255)
  subcategories String?   @db.VarChar(255)
  imagePath     String?   @db.VarChar(500)
  urlLink       String?   @db.VarChar(500)
  isActive      Boolean   @default(true)
  createdBy     String?   @db.VarChar(255)
  updatedBy     String?   @db.VarChar(255)
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  @@map("services")
}

model Application {
  id                  Int       @id @default(autoincrement())
  title               String?   @db.VarChar(255)
  detail              String?   @db.VarChar(500)
  imagePath           String?   @db.VarChar(500)
  applicationMainType String?   @db.VarChar(255)
  applicationType     String?   @db.VarChar(255)
  isActive            Boolean   @default(true)
  createdBy           String?   @db.VarChar(255)
  updatedBy           String?   @db.VarChar(255)
  createdAt           DateTime  @default(now())
  updatedAt           DateTime  @updatedAt

  @@map("applications")
}

model FormDownload {
  id          Int       @id @default(autoincrement())
  title       String?   @db.VarChar(255)
  typeForm    String?   @db.VarChar(255)
  typeMember  String?   @db.VarChar(255)
  filePath    String?   @db.VarChar(500)
  legacyPath  String?   @db.VarChar(500)  // ‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏Å‡πà‡∏≤ ‡πÄ‡∏ä‡πà‡∏ô 985fdf3a-5701-4c7e-85a8-015da42d2872.pdf
  isActive    Boolean   @default(true)
  createdBy   String?   @db.VarChar(255)
  updatedBy   String?   @db.VarChar(255)
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  @@index([legacyPath])
  @@map("form_downloads")
}

model MemberMedia {
  id          Int       @id @default(autoincrement())
  title       String    @db.VarChar(500)
  description String?   @db.VarChar(1000)
  category    String    @db.VarChar(200)
  coverUrl    String?   @db.VarChar(1000)        // ‡∏†‡∏≤‡∏û‡∏õ‡∏Å (‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á icon ‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÑ‡∏ü‡∏•‡πå)
  filePath    String?   @db.VarChar(1000)
  fileType    String    @default("pdf") @db.VarChar(20) // pdf, video, image, link
  legacyPath  String?   @db.VarChar(500)  // ‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏Å‡πà‡∏≤ ‡πÄ‡∏ä‡πà‡∏ô d1e18c72-3a85-44c0-8b56-4006d934c177.pdf
  sortOrder   Int       @default(0)
  isActive    Boolean   @default(true)
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  @@index([category])
  @@index([isActive, sortOrder])
  @@index([legacyPath])
  @@index([createdAt])
  @@map("member_media")
}

// ============================================================
// üìä Financial Reports
// ============================================================

model InterestRate {
  id              Int       @id @default(autoincrement())
  interestType    String?   @db.VarChar(255)
  name            String?   @db.VarChar(255)
  interestDate    DateTime? @db.Date
  conditions      String?   @db.VarChar(500)
  interestRate    String?   @db.VarChar(50)
  interestRateDual String?  @db.VarChar(50)
  isActive        Boolean   @default(true)
  createdBy       String?   @db.VarChar(255)
  updatedBy       String?   @db.VarChar(255)
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt

  @@map("interest_rates")
}

model BusinessReport {
  id          Int       @id @default(autoincrement())
  title       String?   @db.VarChar(255)
  imagePath   String?   @db.VarChar(500)
  filePath    String?   @db.VarChar(500)
  legacyPath  String?   @db.VarChar(500)  // ‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏Å‡πà‡∏≤ ‡πÄ‡∏ä‡πà‡∏ô a1710c90-bb47-46d6-bae2-8335eccefc1e.pdf
  isActive    Boolean   @default(true)
  createdBy   String?   @db.VarChar(255)
  updatedBy   String?   @db.VarChar(255)
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  @@index([legacyPath])
  @@map("business_reports")
}

model AssetLiability {
  id          Int       @id @default(autoincrement())
  year        String?   @db.VarChar(10)
  titleMonth  String?   @db.VarChar(255)
  filePath    String?   @db.VarChar(500)
  isActive    Boolean   @default(true)
  createdBy   String?   @db.VarChar(255)
  updatedBy   String?   @db.VarChar(255)
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  @@map("assets_liabilities")
}

// ============================================================
// üìú Regulations & Documents
// ============================================================

model Regulation {
  id          Int       @id @default(autoincrement())
  title       String?   @db.VarChar(255)
  typeForm    String?   @db.VarChar(255) // statute, regularity, declare
  typeMember  String?   @db.VarChar(255)
  filePath    String?   @db.VarChar(500)
  isActive    Boolean   @default(true)
  createdBy   String?   @db.VarChar(255)
  updatedBy   String?   @db.VarChar(255)
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  @@map("regulations")
}

// ============================================================
// üó≥Ô∏è Elections
// ============================================================

model Election {
  id              Int       @id @default(autoincrement())
  member          String?   @db.VarChar(255)
  idCard          String?   @db.VarChar(255)
  fullName        String?   @db.VarChar(255)
  department      String?   @db.VarChar(255)
  fieldNumber     String?   @db.VarChar(50)
  sequenceNumber  String?   @db.VarChar(50)
  memberType      String?   @db.VarChar(100)
  createdBy       String?   @db.VarChar(255)
  updatedBy       String?   @db.VarChar(255)
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt

  @@index([department])
  @@index([memberType])
  @@map("elections")
}

model ElectionDepartment {
  id              Int       @id @default(autoincrement())
  departmentName  String?   @db.VarChar(255)
  filePath        String?   @db.VarChar(500)
  createdBy       String?   @db.VarChar(255)
  updatedBy       String?   @db.VarChar(255)
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt

  @@map("election_departments")
}

// ============================================================
// ‚ùì Q&A Forum
// ============================================================

model Question {
  id            Int       @id @default(autoincrement())
  title         String    @db.VarChar(255)
  body          String    @db.Text
  name          String    @db.VarChar(255)
  memberNumber  String    @db.VarChar(255)
  viewCount     Int       @default(0)
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  // Relations
  answers       Answer[]

  @@map("questions")
}

model Answer {
  id          Int       @id @default(autoincrement())
  questionId  Int
  name        String?   @db.VarChar(255)
  body        String    @db.Text
  createdAt   DateTime  @default(now())

  // Relations
  question    Question  @relation(fields: [questionId], references: [id], onDelete: Cascade)

  @@index([questionId])
  @@map("answers")
}

// ============================================================
// üì¨ Complaints
// ============================================================

model Complaint {
  id              Int       @id @default(autoincrement())
  trackingCode    String    @unique @db.VarChar(20)
  memberId        String?   @db.VarChar(255)
  name            String?   @db.VarChar(255)
  tel             String?   @db.VarChar(20)
  email           String?   @db.VarChar(255)
  category        String    @default("complaint") @db.VarChar(100) // complaint, suggestion, inquiry
  subject         String?   @db.VarChar(500)
  complaint       String?   @db.Text
  status          String    @default("pending") @db.VarChar(50) // pending, reviewing, resolved, rejected
  adminNote       String?   @db.Text
  resolvedAt      DateTime?
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt

  @@index([trackingCode])
  @@index([status])
  @@index([createdAt])
  @@map("complaints")
}

// ============================================================
// üìû Contact & Bank ‚Äî Admin-managed
// ============================================================

model ContactInfo {
  id          Int       @id @default(autoincrement())
  key         String    @unique @db.VarChar(100) // address, hours, hoursNote, phone, phoneSub1, phoneSub2, fax1, fax1Note, fax2, fax2Note, email, lineOfficialId, lineOfficialUrl, mainPhone
  value       String    @db.Text
  sortOrder   Int       @default(0)
  updatedBy   String?   @db.VarChar(255)
  updatedAt   DateTime  @updatedAt

  @@index([key])
  @@map("contact_info")
}

model Department {
  id          Int       @id @default(autoincrement())
  name        String    @db.VarChar(255)
  dohCodes    String?   @db.VarChar(255)
  coopExt     String?   @db.VarChar(255)
  mobile      String?   @db.VarChar(50)
  sortOrder   Int       @default(0)
  isActive    Boolean   @default(true)
  updatedBy   String?   @db.VarChar(255)
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  @@index([sortOrder])
  @@map("departments")
}

model LineContact {
  id          Int       @id @default(autoincrement())
  name        String    @db.VarChar(255)
  lineUrl     String    @db.VarChar(500)
  sortOrder   Int       @default(0)
  isActive    Boolean   @default(true)
  updatedBy   String?   @db.VarChar(255)
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  @@index([sortOrder])
  @@map("line_contacts")
}

model BankAccount {
  id              Int       @id @default(autoincrement())
  bankName        String    @db.VarChar(255)
  bankNameSub     String?   @db.VarChar(255)
  accountNumber   String    @db.VarChar(50)
  accountType     String    @default("‡∏≠‡∏≠‡∏°‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå") @db.VarChar(100)
  brandColor      String    @default("#1a2d4a") @db.VarChar(20)
  abbr            String?   @db.VarChar(20)
  sortOrder       Int       @default(0)
  isActive        Boolean   @default(true)
  updatedBy       String?   @db.VarChar(255)
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt

  @@index([sortOrder])
  @@map("bank_accounts")
}

// ============================================================
// ÔøΩ Festival Themes
// ============================================================

model FestivalTheme {
  id            Int       @id @default(autoincrement())
  name          String    @db.VarChar(255)        // ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏ó‡∏®‡∏Å‡∏≤‡∏• ‡πÄ‡∏ä‡πà‡∏ô "‡∏ß‡∏≤‡πÄ‡∏•‡∏ô‡πÑ‡∏ó‡∏ô‡πå 2569"
  themeKey      String    @db.VarChar(50)         // valentine, newyear, songkran, christmas, loy-krathong
  isActive      Boolean   @default(false)
  startDate     DateTime  @db.Date
  endDate       DateTime  @db.Date
  colorPrimary  String?   @db.VarChar(20)         // override ‡∏™‡∏µ‡∏´‡∏•‡∏±‡∏Å ‡πÄ‡∏ä‡πà‡∏ô #e91e63
  colorBg       String?   @db.VarChar(20)         // override ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á
  effect        String    @default("none") @db.VarChar(50) // falling-hearts, fireworks, snow, confetti, water-drops, lanterns, none
  effectUrl     String?   @db.VarChar(500)        // custom Lottie URL ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö effect
  intensity     Int       @default(50)            // ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ô‡∏≤‡πÅ‡∏ô‡πà‡∏ô effect 0-100
  effectScale   Int       @default(50)            // ‡∏Ç‡∏ô‡∏≤‡∏î effect 0-100 (‡πÄ‡∏•‡πá‡∏Å‚Üí‡πÉ‡∏´‡∏ç‡πà)
  effectColor   String?   @db.VarChar(20)         // ‡∏™‡∏µ effect ‡πÄ‡∏ä‡πà‡∏ô #ffffff
  effectCount   Int       @default(2)             // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô Lottie pop ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô 1-5
  effectDelay   Int       @default(1500)          // ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á pop (ms) 0-5000
  animation     String    @default("none") @db.VarChar(50) // santa-sleigh, rocket, cupid, none
  animationUrl  String?   @db.VarChar(500)        // custom image URL ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö animation
  animationScale Int      @default(50)            // ‡∏Ç‡∏ô‡∏≤‡∏î animation 0-100 (‡πÄ‡∏•‡πá‡∏Å‚Üí‡πÉ‡∏´‡∏ç‡πà)
  createdBy     String?   @db.VarChar(255)
  updatedBy     String?   @db.VarChar(255)
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  @@index([isActive])
  @@index([startDate, endDate])
  @@map("festival_themes")
}

// ============================================================
// ÔøΩüé® Site Settings & Particles
// ============================================================

model SiteSetting {
  id        Int       @id @default(autoincrement())
  key       String    @unique @db.VarChar(100)
  value     String?   @db.Text
  remark    String?   @db.VarChar(255)
  updatedAt DateTime  @updatedAt

  @@map("site_settings")
}

model Particle {
  id          Int       @id @default(autoincrement())
  category    String    @db.VarChar(255)
  imagePaths  Json?     // JSON array of image paths
  isActive    Boolean   @default(true)
  createdBy   String?   @db.VarChar(255)
  updatedBy   String?   @db.VarChar(255)
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  @@index([category])
  @@index([isActive])
  @@map("particles")
}

// ============================================================
// üìä Analytics & Logging
// ============================================================

model VisitLog {
  id          Int       @id @default(autoincrement())
  visitDate   DateTime  @default(now())
  ipAddress   String?   @db.VarChar(45)
  userAgent   String?   @db.VarChar(500)
  pageUrl     String?   @db.VarChar(500)

  @@index([visitDate])
  @@map("visit_logs")
}

model CookieConsent {
  id               Int       @id @default(autoincrement())
  userId           String    @db.VarChar(255)
  consentStatus    Boolean
  cookieCategories Json?
  ipAddress        String    @db.VarChar(45)
  userAgent        String?   @db.VarChar(255)
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt

  @@map("cookie_consents")
}

model AuditLog {
  id          Int       @id @default(autoincrement())
  userId      Int?
  action      String    @db.VarChar(100) // create, update, delete
  tableName   String    @db.VarChar(100)
  recordId    Int?
  oldValues   Json?
  newValues   Json?
  ipAddress   String?   @db.VarChar(45)
  createdAt   DateTime  @default(now())

  // Relations
  user        User?     @relation(fields: [userId], references: [id], onDelete: SetNull)

  @@index([userId])
  @@index([tableName])
  @@index([createdAt])
  @@map("audit_logs")
}

// ============================================================
// üí¨ Q&A Board
// ============================================================

// ============================================================
// üìä Financial Summary (‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏¥‡∏ô‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡πÅ‡∏•‡∏∞‡∏´‡∏ô‡∏µ‡πâ‡∏™‡∏¥‡∏ô)
// ============================================================

model FinancialSummary {
  id              Int       @id @default(autoincrement())
  year            Int                           // ‡∏û.‡∏®. e.g. 2568
  month           Int                           // 1-12
  title           String?   @db.VarChar(255)    // ‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (optional override)
  fileUrl         String?   @db.VarChar(500)    // PDF or image URL
  totalAssets     Decimal?  @db.Decimal(18, 2)  // ‡∏£‡∏ß‡∏°‡∏™‡∏¥‡∏ô‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå
  totalLiabilities Decimal? @db.Decimal(18, 2)  // ‡∏£‡∏ß‡∏°‡∏´‡∏ô‡∏µ‡πâ‡∏™‡∏¥‡∏ô
  totalEquity     Decimal?  @db.Decimal(18, 2)  // ‡∏ó‡∏∏‡∏ô‡∏Ç‡∏≠‡∏á‡∏™‡∏´‡∏Å‡∏£‡∏ì‡πå
  totalMembers    Int?                          // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
  isActive        Boolean   @default(true)
  updatedBy       String?   @db.VarChar(255)
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt

  @@unique([year, month])
  @@index([year])
  @@index([isActive])
  @@map("financial_summaries")
}

// ============================================================
// üìÑ Forms (‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ï‡πà‡∏≤‡∏á‡πÜ)
// ============================================================

model Form {
  id          Int      @id @default(autoincrement())
  category    String   @db.VarChar(100)  // ‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏™‡∏≤‡∏°‡∏±‡∏ç ‡∏Å, ‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏™‡∏≤‡∏°‡∏±‡∏ç ‡∏Ç, ‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏™‡∏°‡∏ó‡∏ö, ‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏ó‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó
  group       String   @db.VarChar(100)  // ‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£, ‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏≠‡∏∑‡πà‡∏ô‡πÜ, ‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Ç‡∏≠‡∏£‡∏±‡∏ö‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏¥‡∏Å‡∏≤‡∏£
  title       String   @db.VarChar(255)
  fileUrl     String?  @db.VarChar(500)
  legacyPath  String?  @db.VarChar(500)  // ‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏Å‡πà‡∏≤ ‡πÄ‡∏ä‡πà‡∏ô 985fdf3a-5701-4c7e-85a8-015da42d2872.pdf
  sortOrder   Int      @default(0)
  isActive    Boolean  @default(true)
  updatedBy   String?  @db.VarChar(255)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([category])
  @@index([group])
  @@index([isActive])
  @@index([legacyPath])
  @@map("forms")
}

// ============================================================
// üìö Annual Reports (‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏õ‡∏µ ‚Äî eBook)
// ============================================================

model AnnualReport {
  id          Int      @id @default(autoincrement())
  year        Int                        // ‡∏õ‡∏µ ‡∏û.‡∏®. ‡πÄ‡∏ä‡πà‡∏ô 2567
  title       String   @db.VarChar(255)  // ‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
  coverUrl    String?  @db.VarChar(500)  // ‡∏†‡∏≤‡∏û‡∏õ‡∏Å
  fileUrl     String   @db.VarChar(500)  // ‡πÑ‡∏ü‡∏•‡πå PDF
  legacyPath  String?  @db.VarChar(500)  // ‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏Å‡πà‡∏≤ ‡πÄ‡∏ä‡πà‡∏ô a1710c90-bb47-46d6-bae2-8335eccefc1e.pdf
  description String?  @db.Text          // ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢
  isActive    Boolean  @default(true)
  updatedBy   String?  @db.VarChar(255)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([year])
  @@index([isActive])
  @@index([legacyPath])
  @@map("annual_reports")
}

// ============================================================
// üìã Meeting Documents (‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°)
// ============================================================

model MeetingDocument {
  id          Int      @id @default(autoincrement())
  year        Int                        // ‡∏õ‡∏µ ‡∏û.‡∏®. ‡πÄ‡∏ä‡πà‡∏ô 2568
  title       String   @db.VarChar(255)  // ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£
  fileUrl     String   @db.VarChar(500)  // ‡πÑ‡∏ü‡∏•‡πå PDF
  coverUrl    String?  @db.VarChar(500)  // ‡∏†‡∏≤‡∏û‡∏õ‡∏Å (optional)
  category    String   @default("general") @db.VarChar(100) // ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà
  sortOrder   Int      @default(0)       // ‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á
  description String?  @db.Text          // ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢
  isActive    Boolean  @default(true)
  updatedBy   String?  @db.VarChar(255)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([year])
  @@index([isActive])
  @@index([category])
  @@map("meeting_documents")
}

// ============================================================
// üì∏ Activity Gallery (‡∏†‡∏≤‡∏û‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏™‡∏´‡∏Å‡∏£‡∏ì‡πå)
// ============================================================

model ActivityAlbum {
  id          Int      @id @default(autoincrement())
  title       String   @db.VarChar(255)
  description String?  @db.Text
  coverUrl    String?  @db.VarChar(500)
  eventDate   DateTime?
  sortOrder   Int      @default(0)
  isActive    Boolean  @default(true)
  updatedBy   String?  @db.VarChar(255)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  photos      ActivityPhoto[]

  @@index([isActive])
  @@index([eventDate])
  @@map("activity_albums")
}

model ActivityPhoto {
  id        Int      @id @default(autoincrement())
  albumId   Int
  imageUrl  String   @db.VarChar(500)
  caption   String?  @db.VarChar(500)
  sortOrder Int      @default(0)
  createdAt DateTime @default(now())

  album     ActivityAlbum @relation(fields: [albumId], references: [id], onDelete: Cascade)

  @@index([albumId])
  @@map("activity_photos")
}

// ============================================================
// üé¨ CO-OP Videos (‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏™‡∏´‡∏Å‡∏£‡∏ì‡πå ‚Äî YouTube links)
// ============================================================

model CoopVideo {
  id           Int      @id @default(autoincrement())
  title        String   @db.VarChar(255)
  youtubeUrl   String   @db.VarChar(500)
  youtubeId    String   @db.VarChar(50)    // extracted video ID
  thumbnailUrl String   @db.VarChar(500)   // auto from YouTube
  description  String?  @db.Text
  sortOrder    Int      @default(0)
  isActive     Boolean  @default(true)
  updatedBy    String?  @db.VarChar(255)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  @@index([isActive])
  @@map("coop_videos")
}

model QnaQuestion {
  id            Int        @id @default(autoincrement())
  authorName    String     @db.VarChar(255)
  memberCode    String?    @db.VarChar(50)
  title         String     @db.VarChar(500)
  body          String     @db.Text
  views         Int        @default(0)
  isPinned      Boolean    @default(false)
  isClosed      Boolean    @default(false)
  isActive      Boolean    @default(true)
  createdAt     DateTime   @default(now())
  updatedAt     DateTime   @updatedAt

  replies       QnaReply[]

  @@index([createdAt])
  @@index([isActive])
  @@map("qna_questions")
}

model QnaReply {
  id            Int          @id @default(autoincrement())
  questionId    Int
  authorName    String       @db.VarChar(255)
  memberCode    String?      @db.VarChar(50)
  body          String       @db.Text
  isAdmin       Boolean      @default(false)
  isActive      Boolean      @default(true)
  createdAt     DateTime     @default(now())
  updatedAt     DateTime     @updatedAt

  question      QnaQuestion  @relation(fields: [questionId], references: [id], onDelete: Cascade)

  @@index([questionId])
  @@index([createdAt])
  @@map("qna_replies")
}

// ============================================================
// üìã Service Pages (‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ ‚Äî infographic + download links)
// ============================================================

model ServicePage {
  id              Int      @id @default(autoincrement())
  slug            String   @unique @db.VarChar(100)   // ‡πÄ‡∏ä‡πà‡∏ô "savings", "emergency-loan"
  title           String   @db.VarChar(255)            // ‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤ ‡πÄ‡∏ä‡πà‡∏ô "‡πÄ‡∏á‡∏¥‡∏ô‡∏ù‡∏≤‡∏Å‡∏≠‡∏≠‡∏°‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå"
  category        String   @db.VarChar(100)            // ‡∏Å‡∏•‡∏∏‡πà‡∏° ‡πÄ‡∏ä‡πà‡∏ô "‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å", "‡πÄ‡∏á‡∏¥‡∏ô‡∏ù‡∏≤‡∏Å", "‡πÄ‡∏á‡∏¥‡∏ô‡∏Å‡∏π‡πâ", "‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏¥‡∏Å‡∏≤‡∏£"
  infographicUrl  String?  @db.VarChar(500)            // URL ‡∏£‡∏π‡∏õ infographic
  downloadLinks   String?  @db.Text                    // JSON array: [{label, url}]
  sortOrder       Int      @default(0)
  isActive        Boolean  @default(true)
  updatedBy       String?  @db.VarChar(255)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@index([slug])
  @@index([category])
  @@index([isActive])
  @@map("service_pages")
}

// ============================================================
// üì± App Guide Sections (‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Application DOHSaving)
// ============================================================

model AppGuideSection {
  id          Int      @id @default(autoincrement())
  title       String   @db.VarChar(255)            // ‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ ‡πÄ‡∏ä‡πà‡∏ô "‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á ‡πÅ‡∏•‡∏∞ ‡∏Å‡∏≤‡∏£‡∏•‡∏∑‡∏°‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô"
  images      String?  @db.Text                    // JSON array: [{imageUrl, caption}]
  sortOrder   Int      @default(0)
  isActive    Boolean  @default(true)
  updatedBy   String?  @db.VarChar(255)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([sortOrder])
  @@index([isActive])
  @@map("app_guide_sections")
}
